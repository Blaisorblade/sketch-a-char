<h1>Samples</h1>

<%= link_to 'back', syms_path %>

<h2><%= @sym.name %></h2>

<% if can? :create, Sample %>
<div id="training-canvas" class="canvas"></div>
<a href="#" id="train">train</a>
<a href="#" id="clear">clear</a>

<script type="text/javascript" charset="utf-8">
  var canvas = $.canvassify('#training-canvas', {width: 400, height: 400});
  $('#clear').click(function(){canvas.clear();return false;});
  $('#train').click(function(){
    $.ajax({
      url: '<%= sym_samples_path(@sym) %>',
      dataType: "script",
      type: "POST",
      processData: false,
      contentType: "application/json",
      data: JSON.stringify({sample:{data: canvas.strokes}})
    });
    canvas.clear();return false;
  });
</script>
<% end %>

<ul class='samples'>
<% @samples.each do |sample| %>
  <li><%= render sample %></li>
<% end %>
</ul>